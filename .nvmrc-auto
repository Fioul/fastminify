#!/bin/bash

# Script d'auto-switch NVM pour FastMinify
# Ce script d√©tecte NVM et utilise automatiquement Node.js 22

# V√©rifier si NVM est disponible
if [ -s "$HOME/.nvm/nvm.sh" ]; then
    # Charger NVM
    source "$HOME/.nvm/nvm.sh"
    
    # V√©rifier si le fichier .nvmrc existe
    if [ -f ".nvmrc" ]; then
        NODE_VERSION=$(cat .nvmrc)
        echo "üîÑ NVM d√©tect√© - Passage √† Node.js $NODE_VERSION..."
        
        # V√©rifier si la version est install√©e
        if nvm list | grep -q "v$NODE_VERSION"; then
            nvm use $NODE_VERSION
            echo "‚úÖ Node.js $NODE_VERSION activ√©"
        else
            echo "üì¶ Installation de Node.js $NODE_VERSION..."
            nvm install $NODE_VERSION
            nvm use $NODE_VERSION
            echo "‚úÖ Node.js $NODE_VERSION install√© et activ√©"
        fi
    else
        echo "‚ö†Ô∏è Fichier .nvmrc non trouv√©"
    fi
else
    echo "‚ÑπÔ∏è NVM non d√©tect√© - Utilisation de la version Node.js par d√©faut"
fi
